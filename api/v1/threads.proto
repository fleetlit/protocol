syntax = "proto3";

package api.v1;

option go_package = "github.com/fleetland/fleetland/pkg/genproto/api/v1;apipb";

import "api/shared/error.proto";

message ListThreadsRequest {
  string app_id = 1;
  string project_id = 2;
  string team_id = 3;
  bool create_if_empty = 4;
}

message ListThreadsResponse {
  api.shared.APIError error = 1;

  repeated Thread threads = 2;
}

message Thread {
  string id = 1;
  string external_id = 2;
  string provider = 3;
  string title = 4;
  string team_id = 5;
  string app_id = 6;
  string project_id = 7;
  int64 created_at = 8;
  int64 created_by = 9;
  int64 updated_at = 10;
  int64 updated_by = 11;
}

message CreateThreadRequest {
  string app_id = 1;
  string project_id = 2;
  string team_id = 3;
}

message CreateThreadResponse {
  api.shared.APIError error = 1;
}

message GetMessageListRequest {
  string thread_id = 1;
  int32 limit = 2;
}

message ThreadMessage {
  string thread_id = 1;
  string role = 2;
  string content = 3;
  int64 created_at = 4;
}

message GetMessageListResponse {
  api.shared.APIError error = 1;

  repeated ThreadMessage messages = 2;
}